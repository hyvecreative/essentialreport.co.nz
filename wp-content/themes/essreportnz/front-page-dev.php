<?php
/*
Template Name: frontpage-home-dev
*/
?>
<?php
get_header( ); 
?>

<!-- begin content -->

<div class="hm-header-wrap">	

<div class="chart-wrap-white white-new">
	
<div class="container-fluid er-head-wrap-new">
	<div class="container">
		<div class="row">
			<div class="col">
				<div class="animate__animated animate__fadeInUpSmall animate__delay-1s">
					<h1>The report that keeps your finger on Australia’s pulse dev<span>.</span></h1>
				</div>
			</div>
		</div>
	</div>	
</div>
		
	
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	  viewBox="0 0 490.4 147.4" xml:space="preserve">
<style type="text/css">
	
</style>
<g>
	<path class="st0" d="M-17.3,104.8"/>
	<line class="st1" x1="-10.3" y1="104.8" x2="513.7" y2="104.8"/>
	<g>
		<path class="st2" d="M-21.3,104.8"/>
		<line class="st3" x1="-19.3" y1="104.8" x2="-17.3" y2="104.8"/>
	</g>
</g>
<polyline class="st6" points="-1,121.3 0.9,120.4 6.1,118.4 11.3,119.9 16.5,122.4 21.7,111.4 26.8,126.4 32,119.4 37.2,122.4 
	42.4,116.9 47.6,121.4 52.7,126.9 56.6,124.9 61.8,123.9 67,108.9 72.2,115.9 77.3,118.9 82.5,121.9 87.7,107.9 92.9,81.4 
	98.1,105.4 103.2,98.4 108.4,99.9 113.6,86.9 118.8,88.9 124,95.4 129.1,92.4 134.3,96.9 139.5,97.4 144.7,97.4 149.9,86.4 
	155,97.4 160.2,91.9 165.4,99.9 170.6,101.9 175.8,88.4 180.9,101.4 186.1,108.4 191.3,105.9 196.5,109.4 200.4,107.4 205.6,104.4 
	210.7,107.4 215.9,101.4 221.1,114.4 226.3,125.4 231.5,111.9 236.6,111.9 241.8,110.4 247,107.9 252.2,95.9 257.4,115.4 
	262.5,109.4 267.7,118.4 272.9,110.4 278.1,101.9 283.3,106.4 288.4,112.4 293.6,115.9 298.8,120.4 304,112.9 309.2,119.9 
	314.3,117.4 319.5,106.9 324.7,119.4 329.9,112.9 335.1,118.4 338.9,125.4 344.1,110.9 349.3,110.4 354.5,133.4 359.7,121.9 
	364.8,122.4 370,116.4 375.2,131.9 380.4,125.9 385.6,117.9 390.7,109.9 395.9,124.9 401.1,126.9 406.3,129.4 411.5,123.9 
	416.7,141.4 421.8,125.4 427,129.4 432.2,112.4 437.4,125.4 442.6,125.4 447.7,120.9 452.9,134.4 458.1,137.9 463.3,132.9 
	468.5,116.9 473.6,128.9 478.8,131.4 482.7,122.4 487.9,128.9 493.1,136.9 498.2,126.4 503.4,131.9 508.6,112.9 513.8,128.9 
	519,113.9 524.1,117.9 529.3,123.9 534.5,127.9 539.7,131.4 544.9,133.9 550,115.9 555.2,124.9 560.4,140.4 565.6,123.4 
	570.8,128.9 575.9,119.4 581.1,138.4 586.3,121.9 591.5,121.4 596.7,134.4 601.8,129.4 607,131.4 612.2,112.9 617.4,130.4 
	621.3,128.9 626.5,124.4 631.6,140.4 636.8,128.4 642,132.9 647.2,138.9 650.8,131.7 "/>
<polyline class="st7" points="-1.1,89.1 0.9,89.9 6.1,91.9 11.3,90.9 16.5,87.9 21.7,99.4 26.8,84.4 32,91.4 37.2,87.9 42.4,93.9 
	47.6,88.9 52.7,83.9 56.6,85.9 61.8,86.9 67,101.4 72.2,94.4 77.3,91.4 82.5,88.9 87.7,102.4 92.9,129.4 98.1,105.4 103.2,112.4 
	108.4,110.4 113.6,123.4 118.8,121.9 124,115.4 129.1,118.4 134.3,113.9 139.5,113.4 144.7,113.4 149.9,124.4 155,113.4 
	160.2,118.4 165.4,110.4 170.6,108.9 175.8,121.9 180.9,108.9 186.1,102.4 191.3,104.9 196.5,101.4 200.4,103.4 205.6,106.4 
	210.7,103.4 215.9,109.4 221.1,95.9 226.3,85.4 231.5,98.9 236.6,98.4 241.8,99.9 247,102.4 252.2,114.9 257.4,94.9 262.5,100.9 
	267.7,91.9 272.9,100.4 278.1,108.4 283.3,104.4 288.4,97.9 293.6,94.4 298.8,90.4 304,97.4 309.2,90.4 314.3,93.4 319.5,103.9 
	324.7,91.4 329.9,97.9 335.1,91.9 338.9,85.4 344.1,99.9 349.3,100.4 354.5,77.4 359.7,88.9 364.8,88.4 370,94.4 375.2,78.9 
	380.4,84.4 385.6,92.4 390.7,100.9 395.9,85.9 401.1,83.4 406.3,81.4 411.5,86.9 416.7,68.9 421.8,84.9 427,81.4 432.2,98.4 
	437.4,85.4 442.6,85.4 447.7,89.9 452.9,76.4 458.1,72.9 463.3,77.9 468.5,93.9 473.6,81.9 478.8,78.9 482.7,88.4 487.9,81.4 
	493.1,73.9 498.2,83.9 503.4,78.4 508.6,97.9 513.8,81.9 519,96.9 524.1,92.4 529.3,86.4 534.5,82.4 539.7,79.4 544.9,76.4 
	550,94.4 555.2,85.4 560.4,70.4 565.6,87.4 570.8,81.9 575.9,91.4 581.1,72.4 586.3,88.4 591.5,89.4 596.7,75.9 601.8,80.9 
	607,79.4 612.2,97.4 617.4,80.4 621.3,81.9 626.5,85.9 631.6,70.4 636.8,82.4 642,77.9 647.2,71.4 650.8,78.6 "/>
	
	</svg>
	
	
</div> <!-- end chart wrap -->
	
	<div class="container-fluid intro-panel-new">
	<div class="container">
		<div class="row">
			
			<div class="col-lg-6 intro-text"> 
				<h2 class=""><?php the_field('banner_head') ?></h2>
	        	<?php the_field('banner_para') ?>
				<div style="margin-right: .5rem;" class="btn btn-yellow btn-subscribe"><?php the_field('banner_but_text') ?> <i class="fas fa-chevron-down" aria-hidden="true"></i></div>
				<a class="btn" href="<?php the_field('banner_but_url_2') ?>"><?php the_field('banner_but_text_2') ?> <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
			</div>
			
			<div class="col-lg-6 intro-image"> 
				<div class="intro-image-wrap"><img src="<?php bloginfo('template_directory'); ?>/images/montage.png" alt="Political Insights" /></div>
			</div>
		</div>
	</div>
	</div>

</div> <!-- end hm-header -->
	
<div id="latest-reports" class="container-fluid latest-reports-hm" style="padding: 2rem 0">		
	<div class="container">
		<div class="row">
			
			
			<div class="col-sm-12 col-md-10 offset-md-1">
				
				<h2 class="report-title text-center">Latest Essential Report</h2>
				
				<?php 
					$args = array(  
						'post_type' => 'reports',
						'post_status' => 'publish',
						'posts_per_page' => 1, 
						'order_by' => 'title', 
						'order' => 'DESC',
					); 

				$loop = new WP_Query( $args ); 

				while ( $loop->have_posts() ) : $loop->the_post();

				the_title( '<h3 class="report-date text-center">', '</h3>' ); 
				?>
				
				<div class="col-sm-12 key-insights" 
					 <?php $insights = get_field('turn_on_insights');
if( $insights && in_array('show', $insights) ) { ?>
    style="display: block;"
<?php } ?> >
				<h3 class="report-title text-center">Key Insights</h3>
					<ul>
						<?php if( have_rows('key_insights') ): while ( have_rows('key_insights') ) : the_row(); ?>
						<li><span><?php the_sub_field('insight_text') ?></span></li>
						<?php endwhile; else: endif; ?>
					</ul>
				</div>


					<div class="entry-content">
						
						<div class="col-sm-12 text-center" style="margin-bottom: 1rem;">
				
							<button id="toggleAccordion" type="button" class="btn btn-orange">Open all questions <i class="fas fa-chevron-down" aria-hidden="true"></i></button>

						</div>
						
						<?php the_content(); ?>
						<?php
				$featured_posts = get_field('report_questions');
				if( $featured_posts ): ?>
					<div id="accordion" class="accordion-wrap" style="padding-left: 0;">
						
						<?php $count = 1; ?>
						<?php $count2 = 1; ?>
						
					<?php foreach( $featured_posts as $post ): 

						// Setup this post for WP functions (variable must be named $post).
						setup_postdata($post); ?>
						
						<div class="card report-list" style="margin-bottom: .5rem;">
							
							<div class="card-header">
								<a class="collapsed card-link" data-toggle="collapse" href="#collapse-<?php echo $count; $count++; ?>"><?php the_title(); ?>
								<i class="fas fa-chevron-down" aria-hidden="true"></i> </a>
							</div>
							
							<div id="collapse-<?php echo $count2; $count2++; ?>" class="collapse" data-_disabled_parent="#accordion"> <!-- Disabled data parent to prevent closing of others when one is shown  -->
							  <div class="card-body">
								 <div class="cat-wrap">
									<span class="category">
										
										<!-- start list questions categories --> 

											  <?php           
											  $product_terms = wp_get_object_terms( $post->ID,  'question_categories' );
												  if ( ! empty( $product_terms ) ) {
												  if ( ! is_wp_error( $product_terms ) ) {
												  foreach( $product_terms as $term ) {
												  echo '<a class="' . $term->slug .'" href="' . get_term_link( $term->slug, 'question_categories' ) . '">' . esc_html( $term->name ) . '</a>, '; 
												  }

												}
											  } ?>
										<!-- end  list questions categories --> 

									</span>
									 
									 <span class="category tag-display"><?php the_tags(' '); ?></span>
									 
								  </div>
								  
								  <div class="question-content">
										<?php the_content(); ?>
								  </div>
								
								<div class="question-charts charts-buttons" style="overflow: hidden;"> 
									
									
								<?php $active = 1; ?>
								<?php $active2 = 1; ?>
									
								<?php if( have_rows('question_charts') ): while ( have_rows('question_charts') ) : the_row(); ?>
										
                  <div class="btn btn-question quest-<?php //echo $active; $active++; ?>" data-q="<?php echo $active; $active++; ?>"><?php the_sub_field('button_text'); ?></div>

                  <?php endwhile; else: endif; ?>
        
                  </div>  <!-- end question charts -->
								  
                  <div class="question-charts chart-content" style="padding: .5rem 0;"> 
        
                  <?php if( have_rows('question_charts') ): while ( have_rows('question_charts') ) : the_row(); ?>

                    <div class="question-show quest-show-<?php //echo $active2; $active2++; ?>" data-q="<?php echo $active2; $active2++; ?>">
                    
                    <?php //the_sub_field('question_content'); ?>

                    <?php

                    // get iframe HTML
                    $iframe = get_sub_field('question_content');
                    // use preg_match to find iframe src
                    preg_match('/src="(.+?)"/', $iframe, $matches);
                    $src = $matches[1];

                    // add extra params to iframe src
                    $params = array(
                      // NA
                    );

                    $new_src = add_query_arg($params, $src);

                    $iframe = str_replace($src, $new_src, $iframe);

                    // add extra attributes to iframe html
                    $attributes = 'loading="lazy"';
                    // use preg_replace to change iframe src to data-src
                    $iframe = preg_replace('~<iframe[^>]*\K(?=src)~i','data-',$iframe);
                    $iframe = str_replace('></iframe>', ' ' . $attributes . '></iframe>', $iframe);

                    // echo $iframe
                    echo $iframe;

                    ?>
                  
                    </div>

                  <?php endwhile; else: endif; ?>
        
                  </div>  <!-- end question charts -->
                    
					<!-- start question share -->
						<a class="copyToClipboard" style="font-size: .875rem; text-decoration: underline; cursor:pointer; margin-right: .5rem;" onclick="copyToClipboard('<?php echo get_permalink($post->ID);?>') ? this.innerText='Copied!': this.innerText='Sorry :(' ">Copy the direct link to this question</a>
								  
			        <!-- end question share-->
								  
					<!-- Your share button code -->
								  
						<?php the_permalink; ?>
								  
						<div class="fb-share-button" data-href="<?php echo get_permalink($post->ID);?>" data-layout="" data-size=""><a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=<?php the_permalink; ?>%2F&amp;src=sdkpreparse" class="fb-xfbml-parse-ignore">Share</a></div>
					<!-- Your share button code -->
								  
								  
					</div> <!-- end card body-->
    				</div>
							
					</div>						
						
					<?php endforeach; ?>
					</div>
					<?php 
					// Reset the global post object so that the rest of the page works correctly.
					wp_reset_postdata(); ?>
				<?php endif; ?>
					</div>

				<?php endwhile; ?>
				
			</div>	
			
			<div class="col-sm-12 report-btns text-center" style="padding-top: 2rem"> 
					
			<a style="margin: 0 .5rem 1rem;" class="btn" href="/reports/">View previous reports <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
			<a style="margin: 0 .5rem 1rem;" class="btn" href="/search/">Explore the full archive <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
			<a style="margin: 0 .5rem 1rem;" class="btn" href="/methodology/">Essential Report Methodology <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
			
			
			</div>
	
			
		</div>
	</div>
</div>

<div class="container-fluid bar-chart">	
	<div class="arrow-down"></div>
	<div class="container">
		<div class="row">
			
			<div class="col-sm-12 col-lg-10 offset-lg-1 text-center form-wrap"> 
				<h2><?php the_field('subscribe_title') ?></h2>
				<p><?php the_field('subscribe_text') ?></p>
				
				<?php gravity_form( 1, false, false, false, '', true, false ); ?>
				
				<div class="priv-dark"><?php the_field('collection_statement', 'option'); ?></div>
			</div>
			
			<figure id="figure">
					  <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 220 177.8" style="enable-background:new 0 0 220 177.8;" xml:space="preserve">
<style type="text/css">
	.st10{fill:#275764;}
	.st11{fill:none;stroke:#0c4755;stroke-width:44;stroke-miterlimit:10;}
	.st12{fill:none;stroke:#1c4f5c;stroke-width:44;stroke-miterlimit:10;}
	.st13{fill:none;stroke:#275764;stroke-width:44;stroke-miterlimit:10;}
	.st14{fill:none;stroke:#013f51;stroke-width:44;stroke-miterlimit:10;}
	.st15{fill:none;stroke:#0c4755;stroke-width:44;stroke-miterlimit:10;}
</style>
<path class="st10" d="M109.5,0"/>
<g class="flag move-up">
	<rect x="109.5" y="91.6" class="st10" width="0.9" height="0.4"/>
	<path class="st10" d="M110.4,92.9c0,0,2.7,0.1,3,0.2c0.2,0,0.6,0.2,0.8,0.2c0.1,0,0.2,0,0.2,0c0.1,0,0.3-0.1,0.5,0
		c0.3,0.1,0.9,0.2,0.9,0.2l1,0.2c0,0,0,0,0.5,0.1s1.1,0.5,1.1,0.5l0.1,0.2c0,0,0,0.2,0,0.5c0,0.3,0.2,0.7,0.2,0.8c0,0.2,0,0.4,0,0.4
		s0,1.2-0.1,1.2c-0.1,0.1-2.8,0.1-3.4,0c-0.6,0-3.3,0-3.6,0.1c-0.4,0.1-1.1,0.3-1.1,0.3s0.3-2.9,0.2-3.2
		C110.7,94,110.4,92.9,110.4,92.9z"/>
	<rect x="109.8" y="92.4" class="st10" width="0.4" height="28"/>
	<path class="st10" d="M108.2,102.7h-1.4l0.4,1.7v11.2l-17.7,15.1c0.3,0.3,0.6,0.6,0.9,0.9h0.1l13.6-11.3l-10.8,14
		c0.4,0.3,0.8,0.6,1.2,0.8l13.7-18.7l0,0l0,0V115h0.8v-0.9h-0.8v-5.9h0.8v-0.9h-0.8C108.2,107.3,108.2,102.7,108.2,102.7z"/>
	<path class="st10" d="M112.8,115.6v-11.2l0.4-1.7h-1.4v4.6h-0.9v0.9h0.9v5.9h-0.9v0.9h0.9v1.5l0,0l0,0l13.7,18.7
		c0.4-0.3,0.8-0.5,1.1-0.8l-10.7-14l13.7,11.4l0,0c0.3-0.3,0.6-0.6,0.9-1L112.8,115.6z"/>
</g>
<line class="st11" x1="22" y1="177.8" x2="22" y2="122.1"/>
<line class="st12" x1="66" y1="177.8" x2="66" y2="108.2"/>
<line class="st13" x1="110" y1="177.8" x2="110" y2="37.7"/>
<line class="st14" x1="154" y1="177.8" x2="154" y2="82"/>
<line class="st15" x1="198" y1="177.8" x2="198" y2="161.8"/>
</svg>
			</figure>
			
		</div>
	</div>
</div>

<div class="container-fluid political-insights"  style="padding-top: 0;">
	
		<div class="arrow-down arrow_insights" style="border-top: 40px solid #083444;"></div>

	<div class="container">
		<div class="row">
			
			<div class="col-sm-12 insight-blocks text-center">
				<h2><?php the_field('political_insights_title') ?></h2>
				<p style="max-width: 700px; margin: 1rem auto 2rem"><?php the_field('political_insights_text') ?></p>
				
				<div class="row text-left" style="margin-bottom: 1rem">
					<div class="col-sm-12" style="margin-bottom: 1rem;">
						<div class="col-sm-12 insight-frame" style="background: #fff;">
							<?php the_field('pi_chart_content') ?>
						</div>
						<div class="col-sm-12 insight-link">

						</div>
					</div>
									
				</div>
				
				<a class="btn btn-dark" href="<?php the_field('pi_button_url') ?>"><?php the_field('pi_button_text') ?>  <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
				
			</div>
	</div>
</div>
<img class="port-pm" src="<?php bloginfo('template_directory'); ?>/images/scott-morrison.png" alt="Scott Morrison" />
<img class="port-opp" src="<?php bloginfo('template_directory'); ?>/images/anthony-albanese.png" alt="Anthony Albanese" />
</div>

<!-- end Political Insights -->

<div class="container-fluid client-projects projects-wrap" style="padding-top: 0;">
	
	<div class="arrow-down arrow_insights" style="margin-bottom: 0;"></div>
	
	<div class="container">  <!-- new content -->
		
		<div class="row members-content">
			
			<div class="col-12 project-intro-cont text-center">
				<h2><?php the_field('project_title') ?></h2>
				<?php the_field('project_intro') ?>
			</div>
	
	<?php // The WordPress Loop 0- customized with query_posts
	query_posts('post_type=client_projects&showposts=4&orderby=title&order=asc');?> 
	<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

	

		<!-- begin storypost -->

			<div class="col-lg-6 project-feed" >
				
				<div class="project-feed-wrap">

				<a style="display: inline-block; margin-left: -1.5rem; margin-right: -1.5rem;" href="<?php the_permalink() ?>">

				<?php if ( has_post_thumbnail() ) {
												the_post_thumbnail(array( ));
												} else { ?>
												<img src="<?php bloginfo('template_directory'); ?>/images/default-member-image.jpg" alt="<?php the_title(); ?>" />
												<?php } ?>

				</a>

				<h3><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h3>

				<div class="excerpthm" style="color: #333;">
					<p><?php the_excerpt(); ?></p>
				</div>

			 </div><!-- END feedcont-->

			</div>

	<?php endwhile; else:

	endif;
	wp_reset_query(); // reset the query
	?>		
	</div>  <!-- end row -->
</div> <!-- end new content  -->	
</div> <!-- end new content  -->


<div class="container-fluid insights-related" style="padding-top: 0;">
	<div class="arrow-down" style="margin-bottom: 2rem; border-top: 40px solid #fff;"></div>
 
	<div class="container">
		<div class="row">
			
		 <div class="col-lg-6" style="margin-bottom: 1.5rem;">
			 
			 <h3><?php the_field('poll_position_title') ?></h3>
			 
			 <?php 
				$image = get_field('poll_position_image');
				if( !empty( $image ) ): ?>
					<img src="<?php echo esc_url($image['url']); ?>" alt="<?php echo esc_attr($image['alt']); ?>" />
			<?php endif; ?>
			 
			 <p style="margin-top: 0;"><?php the_field('poll_position_text') ?></p>
			 
			 <div class="text-center"><a class="btn btn-dark" href="<?php the_field('pp_button_url') ?>"><?php the_field('pp_button_text') ?> <i class="fas fa-chevron-right" aria-hidden="true"></i></a></div>
			 
			</div>
			
		<div class="col-lg-6">
			
			<h3><?php the_field('policical_analysis_title') ?></h3>
			
			  <?php 
				$image = get_field('analysis_pic');
				if( !empty( $image ) ): ?>
					<img src="<?php echo esc_url($image['url']); ?>" alt="<?php echo esc_attr($image['alt']); ?>" />
			  <?php endif; ?>
			
			<p class="image-credit"><?php the_field('image_credit') ?></p>
			
			<div class="text-center" style="margin-top: .5rem;"><a class="btn btn-dark" href="<?php the_field('pa_button_url') ?>"><?php the_field('pa_button_text') ?> <i class="fas fa-chevron-right" aria-hidden="true"></i></a></div>
		</div>
			
		</div>
	</div>
</div>


<div class="container-fluid subscribe" style="padding-top: 0;">	
	
	<div class="arrow-down"></div>

	<div class="container">
		<div class="row">
			
			
			
			<div class="col-sm-12 text-center form-wrap"> 
				<h2><?php the_field('purchase_title') ?></h2>
				<h3><?php the_field('purchase_sub_head') ?></h3>
				<p><?php the_field('purchase_text') ?></p>
				
				
			</div>
			
			<div class="col-sm-12 text-center">
			
			<a class="btn btn-yellow" href="<?php the_field('pur_button_url') ?>"><?php the_field('pur_button_text') ?> <i class="fas fa-chevron-right" aria-hidden="true"></i></a>
				
			</div>
			
			<figure class="pie-large">
					<svg id="mysvg" viewBox="0 0 63.6619772368 63.6619772368">
						<circle class="pie1" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie2" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie3" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie4" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
					  </svg>
			</figure>
			
			<figure class="pie-small">
					<svg id="mysvg2" viewBox="0 0 63.6619772368 63.6619772368">
						<circle class="pie5" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie6" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie7" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie8" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
						<circle class="pie9" cx="31.8309886184" cy="31.8309886184" r="15.9154943092"/>
					</svg>
			</figure>
			
		</div>
	</div>
</div>




<div class="container-fluid news-wrap">
	<div class="container">
		<div class="col-12 text-center">
			<h2>In the News</h2>
		</div>
			<div class="col-12">
			<?php get_template_part( 'partials/content', 'news-feed' ); ?>
		</div>
	</div>
</div>

<div class="container-fluid purchase-spruik" style="display: none; padding: 6rem 0 7rem;">	
	<div class="container">
		<div class="col-12 text-center">
			<h2>Essential Spruik</h2>
			<p>Content...</p>
			<a class="btn btn-banner" href="#">Visit Essential</a>
		</div>
	</div>
</div>


 <!-- end Join wrap -->

<script>

$(document).ready(function(){

  
  /* Open All Accordions */

  $("#toggleAccordion").on('click', function(){
    if ($(this).data("closedAll")) {
      $('#accordion .collapse').collapse('show'); // Show All using bootstrap collapse method
      $('#toggleAccordion').html('Close all questions <i class="fas fa-chevron-up" aria-hidden="true"></i>'); // Change button text

      // Loop all questions, add active and set src
      $( ".chart-content .question-show:first-child" ).each(function( index ) {
        $(this).addClass('active');
        var iframeSrc = $(this).find('iframe').data('src'); // Get the src from the data attribute
        $(this).find('iframe').attr('src', iframeSrc); // Apply the src to iframe to trigger it to load
      });
          
    }
    else {
      $('#accordion .collapse').collapse('hide'); // Hide All using bootstrap collapse method
      $('#toggleAccordion').html('Open all questions <i class="fas fa-chevron-down" aria-hidden="true"></i>'); // Change button text
    }

    // save last state
    $(this).data("closedAll", !$(this).data("closedAll")); 
  });

  // init with all closed
  $("#toggleAccordion").data("closedAll", true);


  
  /* Open Single Accordion */

  // Handled by Bootstrap Collapse component, Callback required to set 1st question active and set iframe src
  $('#accordion').on('show.bs.collapse', function (e) {

    console.log(e.target);

    // add active and set src
    var firstQues = $(e.target).find( ".chart-content .question-show:first-child" ); // Get the first ques elem in this set
    firstQues.addClass('active'); // Set it as active
    var iframeSrc = firstQues.find('iframe').data('src'); // Get the src from the data attribute 
    firstQues.find('iframe').attr('src', iframeSrc); // Apply the src to iframe to trigger it to load

  })


	/* Toggle Individual Questions */

  jQuery('.btn-question').on('click', function () {

    var quesNum = $(this).data('q'); // Get the ques number we are opening
    //console.log('Q# = ' + quesNum);
    var quesThis = $(this).parent('.charts-buttons').next('.chart-content').children('.question-show[data-q="' + quesNum + '"]'); // Get the ques elem for this ques num
    var quesAll = $(this).parent('.charts-buttons').next('.chart-content').children('.question-show'); // Get all ques elems in this set

    quesAll.removeClass('active'); // Close all sibling questions
    quesThis.addClass('active'); // Activate this question

    var iframeSrc = quesThis.find('iframe').data('src'); // Get the src from the data attribute
    quesThis.find('iframe').attr('src', iframeSrc); // Apply the src to iframe to trigger it to load
    
  });

});


</script>

<style>

body .question-show.active {
    max-height: 2000px;
    opacity: 1;
    transition: opacity 300ms ease-in-out 700ms, max-height 0s linear 300ms;
}

body .question-show {
    display: block;
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: opacity 300ms ease-in-out 0s, max-height 0s linear 300ms;
}

</style>

<script>/**
 * Copy a string to clipboard
 * @param  {String} string         The string to be copied to clipboard
 * @return {Boolean}               returns a boolean correspondent to the success of the copy operation.
 * @see https://stackoverflow.com/a/53951634/938822
 */
	
function copyToClipboard(string) {
  let textarea;
  let result;

  try {
    textarea = document.createElement('textarea');
    textarea.setAttribute('readonly', true);
    textarea.setAttribute('contenteditable', true);
    textarea.style.position = 'fixed'; // prevent scroll from jumping to the bottom when focus is set.
    textarea.value = string;

    document.body.appendChild(textarea);

    textarea.focus();
    textarea.select();

    const range = document.createRange();
    range.selectNodeContents(textarea);

    const sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);

    textarea.setSelectionRange(0, textarea.value.length);
    result = document.execCommand('copy');
  } catch (err) {
    console.error(err);
    result = null;
  } finally {
    document.body.removeChild(textarea);
  }

  // manual copy fallback using prompt
  if (!result) {
    const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
    const copyHotkey = isMac ? '⌘C' : 'CTRL+C';
    result = prompt(`Press ${copyHotkey}`, string); // eslint-disable-line no-alert
    if (!result) {
      return false;
    }
  }
  return true;
}

	
</script>


<?php get_footer(); ?>